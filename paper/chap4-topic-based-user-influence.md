# 基于主题的用户影响力研究

本章将详细介绍基于主题的用户影响力研究算法，提出了一种有效粉丝的概念，通过计算用户的粉丝对特定主题的关注程度，来评估该用户在特定主题下的影响力。

## 问题提出

在公司推广产品和投放广告方面，经常存在这很严重的经费浪费问题，由于事先无法知道哪部分人对该产品感兴趣，这些工作的对象往往是铺天盖地无差别式的进行，命中率很低。如果可以计算和评估每个用户对某些主题的感兴趣程度，定向地向一小部分人推广，利用粉丝效应，就可以达到事半功倍的效果。不仅节省资金成本，还能节省时间成本。那么，如何找出最有影响力的这一部分人就是我们研究的内容。

据《2015微博用户发展报告》显示，截至 2015 年 9 月 30 日，微博月活跃用户数（MAU）已达到 2.22 亿人，其中以 17 - 33 岁年龄段的用户最为活跃，关注的话题以社会和明星两大类的关注度最高。据第 36 次《中国互联网发展状况统计报告》显示，截至 2015 年 5 月，我国已有网民 6.68 亿。从以上数据不难看出新浪微博在国内社交网络中占有着重要的地位，为中文社交网络的研究和分析提供了十分有价值的数据。微博用户影响力是评估微博用户在该社交网络中重要的衡量指标之一。本文以新浪微博的数据为例，研究新浪微博中，用户影响力的评估标准和计算方法。

本章首先描述一个社交网络的图模型，然后介绍研究的思路和所做的工作，最后详细阐述本文算法的计算过程。

## 建立模型

在社交网络影响力最大化的问题中，将社交网络建模为一个有向图 G=(V, E)，其中 V 代表用户节点的集合， E 属于 V*V 是用户之间关注关系的有向边集合。

* EF(i) 表示用户 i 的有效粉丝数。
* inf(u(i), d) 表示用户 i 在主题 d 下的影响力，根据所有 inf 值，找出影响力前 K 大的用户集合。

例如，给出有向图 G=(V, E) 和参数 K，影响力最大化问题是在节点集合 V 中挑选 K 个节点，组成 S 集合，使得影响力传播 theta(S) 最大。

## 初步研究

从最简单的思路出发，要找一个社交网络中影响力最大的用户集合，那么很自然的想到粉丝数越多的用户，拥有的影响力也越大。在模型上的表示就是用户节点的入度越大，则相应的影响力越大。InDegree 算法就是这样的思路。但是这种算法计算出的影响力有很大“水份”，可能存在僵尸粉等毫无意义的粉丝，数量虽多，但仅从数量一个维度来评估一个用户的影响力难免有失偏颇。可能有些用户的粉丝数不多，但都是名人、大V等，很有影响力；而有些用户粉丝数量很多，但都是刚注册不久，没有网络活跃度的僵尸粉。所以单从粉丝数量上来评估一个用户的影响力是不够的。

进一步考虑，在评估用户影响力时增加评估标准的维度，如用户的操作行为数据，包括用户发微博数，被转发微博数，关注，评论等。对用户的多个操作行为设置相应的权值，按照一定的评估公式，计算用户的影响力数值。很多基于 PageRank 的算法，如 TunkRank 算法等，在简单算法的基础上，将不同维度的信息加以处理整合，得到用户的影响力大小。但是这样计算出来的用户影响力的数值有一个前提，就是每个用户节点的影响力是无差别的，也就是说任意行业或领域的用户影响力都通过同样的评估标准被计算出来，放在一起进行比较。然而，现实中这个前提并不成立。

从现实生活中的经验来看，大多数人对自己专业领域内的知识比较熟悉，而对其他领域的知识与普通人并无差别，如音乐领域的巨匠在计算机领域的影响力与常人无异。

## 有效粉丝

### 定义

鉴于使用社交网络中用户的绝对粉丝数在评估用户影响力上的不足，本文提出了一个有效粉丝的概念。有效粉丝基于用户对特定主题的关注度与用户的绝对粉丝数，在一个特定主题网络中，用户的有效粉丝数可以定义为该用户的所有受关注的路径粉丝节点集合中对特定主题关注度与绝对粉丝数的累积。

### 公式

（有效粉丝公式）

其中，EF(i) 表示用户 i 的有效粉丝数，集合 AP(i) 表示在特定主题下的社交网络中与用户 i 存在关注路径的用户集合，集合 P(ij) 表示用户 i 到用户 j 的关注路径上的所有用户集合，A(k) 表示用户 k 对特定主题的关注度，F(j) 表示用户 j 的绝对粉丝数。

## 用户影响力

### 公式

（用户影响力公式）

其中，inf(ui,d) 表示用户 i 在主题 d 下的影响力，tw(j) 表示微博 j，T(i,d) 表示用户 i 发送的关于主题 d 下的微博，u(x) 表示用户 x，Ret(tw(j)) 表示转发微博 j 的用户，EF(x) 表示用户 x 的绝对粉丝数，start(tw(j)) 表示第一个发送微博 j 的用户，dist(u(x), start(tw(j))) 表示用户 x 与第一个发送微博 j 的用户的距离，|Ret(tw(j))| 表示转发微博 j 的用户个数，|T(i,d)| 表示用户 i 发送的关于主题 d 下的微博总数。

## 算法步骤

本文算法包括六个步骤，来评估社交网络中基于主题的用户影响力：

1. 对一个微博数据集做去重和过滤处理
1. 对微博消息做自然语言处理
1. 使用 LDA Gibbs Sampling 得到每个用户的每条微博的兴趣主题和对主题的关注度
1. 对每个用户的每个主题，对其概率分布做加权平均，得到每个用户对应每个主题的概率
1. 找出所有对特定主题感兴趣的用户
1. 在微博网络中，找到所有对特定主题感兴趣的用户间的关注关系，形成特定主题下的微博网络
1. 在特定主题下的微博网络中，使用有效粉丝公式，计算每个用户在特定主题下的有效粉丝数
1. 使用影响力公式计算每个用户在特定主题下的影响力

## 算法伪代码

Input: G
Output: inf
attention(w,d)=LDA Gibbs Sampler(G);
For each user i
	For each topic t
		For each weibo w shared by user i
			sum=sum+attention(w,d);
		attention(i,d)=sum/weibo numbers of user i;
ConstructTopicNetwork(G);
For each user i
	For each topic d
		EfficientFans(i,d);
For each user i
	For each topic d
		Influence(i,d);
